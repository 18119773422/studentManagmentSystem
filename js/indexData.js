!function(e){var n={};function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(t,a,e){i.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(a,t){if(1&t&&(a=i(a)),8&t)return a;if(4&t&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var n in a)i.d(e,n,function(t){return a[t]}.bind(null,n));return e},i.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},i.p="",i(i.s=88)}({88:function(t,a,e){"use strict";e.r(a);var l;e(89),e(90),e(91);l=window.jQuery,{init:function(){this.baseUrl="http://api.duyiedu.com/api/student/",this.dataList=null,this.all=null,this.page=1,this.size=15,this.flag=!1,this.msg=null,location.hash=" ",location.hash="#student-list",this.fetchFirstData(),this.bindEvent(),this.addStudent()},fetchFirstData:function(){this.getData("page")},bindEvent:function(){l(".loading_").click(function(){l(this).hide()}),l(window).on("hashchange",function(t){var a=this.location.hash.slice(1);l("#phoneList").collapse("hide"),l("a[href='#".concat(a,"']")).css({color:"#fff"}),l("a[href!='#".concat(a,"']")).css({color:"#ddd"}),l(".current-show").hide().removeClass(".current-show"),l(".".concat(a)).show().addClass("current-show")}),l(".right-content").click(function(){l("#phoneList").collapse("hide")})},handle:function(t,a,e){var n=1<arguments.length&&void 0!==a?a:"findByPage",i=2<arguments.length?e:void 0,o=this,d=Object.assign({appkey:"testData_1554196932590"},t);l.ajax({type:"get",url:o.baseUrl+{findByPage:"findByPage",del:"delBySno",add:"addStudent",update:"updateStudent",search:"searchStudent",all:"findAll"}[n],data:d,dataType:"json",success:function(t){"fail"==t.status&&alert(t.msg),"function"==typeof i&&i(t),t.msg,t.data&&(o.dataList=t.data.findByPage||t.data.searchList,o.all=t.data.cont?t.data.cont:o.dataList.length,localStorage.all=o.all,o.renderDom(o.dataList),window.dataList=o.dataList)}})},renderDom:function(t){l(".loading_").show().find(".success_").show();var e=this,n=(new Date).getFullYear(),a=l(".student-list tbody");if("array"==l.type(t)){var i="";t.forEach(function(t,a){i+="<tr>\n                    <td>".concat(t.sNo,"</td>\n                    <td>").concat(t.name,"</td>\n                    <td>").concat(parseInt(t.sex)?"女":"男","</td>\n                    <td>").concat(n-t.birth,"</td>\n                    <td>").concat(t.phone,"</td>\n                    <td>").concat(t.email,"</td>\n                    <td>").concat(t.address,"</td>\n                    <td>\n                        <button data-index=").concat(a,' class="btn btn-success edit"  data-toggle="modal"\n                        data-target="#myModal">编辑</button>\n                        <button data-index=').concat(a,' class="btn btn-danger del">删除</button>\n                    </td>\n                </tr>')});var o=setTimeout(function(){l(".loading_").hide().find(".success_").hide(),clearTimeout(o)},100);a.html(i),l(".page").turnPage({cur:e.page,all:Math.ceil(e.all/e.size)||1,changePageFun:function(t,a){e.page!=t&&(e.page=t,e.getData("page"))}}),e.dialog()}},getData:function(t,a,e){var n=this;({del:function(t,a,e){n.dataList.length<2&&(n.page--,this.page()),n.dataList.splice(e,1),n.all--,n.renderDom(n.dataList),n.handle(a,t)},add:function(t,a){n.dataList.push(a),n.all++,n.renderDom(n.dataList),l(".form-add button[type=reset]").trigger("click"),n.handle(a,t)},all:function(){n.handle(null,"all")},page:function(){n.handle({page:n.page,size:n.size})},update:function(t,a,e){Object.assign(a,{sNo:n.dataList[e].sNo}),n.dataList.splice(e,1,a),n.renderDom(n.dataList),n.handle(a,t)},verify:function(t){}})[t](t,a,e)},dialog:function(){var n=this;l("form").submit(function(t){return t.preventDefault(),!1}),l(".edit").on("click",function(t){var a,e=null;a=l(this).attr("data-index"),n.backfill(a),e=n.dataList[a].sNo,n.flag=!0,l("#sub").on("click",function(t){t.preventDefault(),(n.flag||e)&&(l("#myModal").modal("hide"),e&&n.getData("update",n.getFormData(l(".form-edit")),a),e=null)})}),l(".del").on("click",function(t){var a,e=null;t.preventDefault(),a=parseInt(l(this).data("index")),e=n.dataList[a].sNo,l(".del-title").text(n.dataList[a].name),l("#delStudent").modal(),l(".modal-body").val("确认删除吗？"),n.flag=!0,l(".sure").on("click",function(t){t.preventDefault(),(n.flag||e)&&(l("#delStudent").modal("hide"),e?n.getData("del",{sNo:e},a):console.log("error"),e=null,n.flag=!1)})})},addStudent:function(){var a=this;l(".form-add .btn-success").click(function(t){a.getData("add",a.getFormData(l(".form-add")))})},getFormData:function(t){var a=t.serializeArray(),e={};for(var n in a)e[a[n].name]=a[n].value;return e},backfill:function(a){var t=this.dataList[a],e=l(".form-edit")[0];for(var n in t)e[n]&&(e[n].value=t[n]);l("#clear").click(function(t){l("#clear").click(function(t){l(".form-edit")[0].reset(),setTimeout(function(){l("#editsNo").val(dataList[a].sNo)},500),console.log(1111,dataList[a].sNo)})})}}.init()},89:function(t,a,e){},90:function(t,a,e){},91:function(t,a,e){}});
